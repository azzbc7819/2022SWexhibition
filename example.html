<html>
<head>
    
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=usxa85bak8&amp;submodules=panorama,geocoder,drawing,visualization"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    
</head>
<body>
    <div style = "margin-top : 20px; margin-bottom : 10px; font-weight : bold;">
        약국 & 병원 지도
    </div>

    <div id = "map" style = "width : 100%; height:80%"></div>"

</body>
<script>
    $(document).ready(async function(){
        let XY = getLocation();
        alert("위도" + XT.lat);
        alert("경도" + XT.lng);
        //지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.
        var mapDiv = document.getElementById('map'); // 'map'으로 선언해도 동일
        //옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.
        var map = new naver.maps.Map(mapDiv);
    });

    async function getLocation(){ // 접속한사람 위치 조회
        let XY = await new Object(); // 위치 반환할 것
        if(navigator.geolocation) { // GPS와 관련된 객체, 이 객체가 존재할때 실행
            
            let promise = new Promise((resolve, rejected) =>{ // 비동기식을 동기식으로
                navigator.geolocation.getCurrentPosition((position) =>{
                    //현재 위치를 알수 있는 함수 인자로 position 객체를 통해 현재 위치를 알 수 있음
                    resolve(position);
                });
            });

            let position = await promise;
            //position.coords.latitude 위도
            //position.coords.longitude 경도
            XY.lat = position.coords.latitude;
            XY.lng = position.coords.longitude;

        }
        return XY;
    }
</script>
</html>